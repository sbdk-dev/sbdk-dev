version: 2

sources:
  - name: main
    description: Raw data tables generated by SBDK pipelines
    tables:
      - name: raw_users
        description: Raw user data with demographics and subscription info
        columns:
          - name: user_id
            description: Unique identifier for users
            tests:
              - unique
              - not_null
          - name: username
            description: User's chosen username
          - name: email
            description: User email address
            tests:
              - unique
              - not_null
          - name: first_name
            description: User's first name
          - name: last_name
            description: User's last name
          - name: created_at
            description: User account creation timestamp
            tests:
              - not_null
          - name: updated_at
            description: Last profile update timestamp
          - name: country
            description: User's country
          - name: city
            description: User's city
          - name: subscription_tier
            description: User's subscription level
          - name: referrer
            description: How user was referred to the platform
          - name: is_active
            description: Whether user account is active
          - name: date_of_birth
            description: User's date of birth
          - name: phone
            description: User's phone number
          - name: company
            description: User's company
          - name: job_title
            description: User's job title

      - name: raw_events
        description: Raw tracking events from user interactions
        columns:
          - name: event_id
            description: Unique identifier for events
            tests:
              - unique
              - not_null
          - name: user_id
            description: User who performed the event
            tests:
              - not_null
          - name: session_id
            description: Session identifier for grouping events
          - name: event_type
            description: Type of event (signup, purchase, etc.)
            tests:
              - not_null
          - name: timestamp
            description: When the event occurred
            tests:
              - not_null
          - name: utm_source
            description: UTM tracking source
          - name: utm_medium
            description: UTM tracking medium
          - name: utm_campaign
            description: UTM tracking campaign
          - name: page_url
            description: URL where event occurred
          - name: referrer_url
            description: Previous page URL
          - name: user_agent
            description: Browser user agent string
          - name: ip_address
            description: User's IP address
          - name: country
            description: User's country from IP
          - name: device_type
            description: Device type (desktop, mobile, tablet)
          - name: browser
            description: Browser name
          - name: os
            description: Operating system
          - name: screen_resolution
            description: Screen resolution
          - name: is_mobile
            description: Whether event from mobile device
          - name: duration_seconds
            description: Duration of event/session in seconds
          - name: revenue
            description: Revenue generated from this event

      - name: raw_orders
        description: Raw e-commerce order transactions
        columns:
          - name: order_id
            description: Unique identifier for orders
            tests:
              - unique
              - not_null
          - name: user_id
            description: User who placed the order
            tests:
              - not_null
          - name: order_number
            description: Human-readable order number
          - name: created_at
            description: Order creation timestamp
            tests:
              - not_null
          - name: completed_at
            description: Order completion timestamp
          - name: status
            description: Order status (pending, completed, cancelled, etc.)
          - name: product_category
            description: Category of ordered product
          - name: product_sku
            description: Product SKU identifier
          - name: quantity
            description: Quantity ordered
          - name: unit_price
            description: Price per unit
          - name: subtotal
            description: Subtotal before discounts and tax
          - name: discount_amount
            description: Discount applied to order
          - name: discount_code
            description: Discount code used
          - name: tax_amount
            description: Tax amount charged
          - name: total_amount
            description: Total order value
            tests:
              - not_null
          - name: currency
            description: Currency code (USD, EUR, etc.)
          - name: payment_method
            description: Payment method used
          - name: payment_processor
            description: Payment processor (Stripe, PayPal, etc.)
          - name: billing_country
            description: Billing address country
          - name: billing_state
            description: Billing address state/province
          - name: billing_city
            description: Billing address city
          - name: billing_postal_code
            description: Billing address postal code
          - name: is_recurring
            description: Whether this is a recurring order
          - name: subscription_period
            description: Subscription period for recurring orders
          - name: utm_source
            description: UTM tracking source for order attribution
          - name: utm_campaign
            description: UTM tracking campaign for order attribution
          - name: referral_code
            description: Referral code used
          - name: customer_notes
            description: Customer notes on the order
          - name: shipping_required
            description: Whether shipping is required
          - name: shipping_cost
            description: Cost of shipping
          - name: estimated_delivery
            description: Estimated delivery date